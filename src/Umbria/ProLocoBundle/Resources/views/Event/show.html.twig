{% extends "UmbriaProLocoBundle::frontend.html.twig" %}

{% block content %}
    <div class="container">
        <div class="row">
            <div class="page-header">
                <h2>
                    {{ event.title }}
                </h2>
            </div>
        </div>
        <div class="row">
            <div class="col-md-7">
                <h4>{{ event.titoloTesto }}</h4>
                <p>
                    {{ event.eventDescription }}
                </p>
            </div>
            <div class="col-md-5">
                <div class="row">
                    <table class="table table-condensed">
                        <tbody>
                        <tr>
                            <td>
                                <small>id contenuto</small>
                            </td>
                            <td>{{ event.idContenuto }}</td>
                        </tr>
                        <tr>
                            <td>
                                <small>coordinate</small>
                            </td>
                            <td>
                                {% for coordinate in event.coordinate %}
                                    {% if coordinate.latitude != '' %}
                                        <small>umbria:</small>
                                        {{ coordinate.latitude }},{{ coordinate.longitude }}
                                    {% elseif coordinate.dbpediaLatitude != '' %}
                                        <small>dbpedia:
                                        </small> {{ coordinate.dbpediaLatitude }},{{ coordinate.dbpediaLongitude }}
                                    {% elseif coordinate.googleLatitude != '' %}
                                        <small>google:
                                        </small>
                                        <a href="https://www.google.it/maps/?q=loc:{{ coordinate.googleLatitude }},{{ coordinate.googleLongitude }}"
                                           target="_blank">{{ coordinate.googleLatitude }}
                                            ,{{ coordinate.googleLongitude }}</a>
                                        <span class="glyphicon glyphicon-info-sign pull-right" data-toggle="tooltip"
                                              data-placement="top"
                                              title="Posizione calcola. Non se ne garantisce l'affidabilitÃ "></span>
                                    {% else %}
                                        -
                                    {% endif %}
                                {% endfor %}
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <small>categorie</small>
                            </td>
                            <td>
                                {% for categoria in event.categorie %}
                                    {% if categoria.categoriaAssociata is not null %}
                                        <span class="label label-default">{{ categoria.categoriaAssociata }}</span>
                                        <br/>
                                    {% endif %}
                                {% endfor %}
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <small>periodo</small>
                            </td>
                            <td>{{ event.startDate }} - {{ event.endDate }}</td>
                        </tr>
                        </tbody>
                    </table>
                </div>
                <div class="row">
                    <table class="table table-condensed">
                        <tbody>
                        <tr>
                            <td>
                                <small>tipo</small>
                            </td>
                            <td>
                                <a href="http://schema.org/Event" target="_blank">
                                    http://schema.org/Event
                                </a>
                            </td>
                        </tr>
                        </tbody>
                    </table>
                </div>
                <div class="row">
                    <img src="{{ event.immagineSpallaDestra }}" height="150">
                </div>
            </div>
        </div>
        <div class="row">
            <br/>
            <ol class="breadcrumb">
                <li><a href="{{ path('event_index') }}">Lista Eventi</a></li>
                <li class="active">{{ event.title }}</li>
            </ol>
        </div>
    </div>
{% endblock %}

{% block javascripts %}
    {{ parent() }}

    <script>
        $(function () {
            $('[data-toggle="tooltip"]').tooltip()
        })

        {% set latitude = '' %}
        {% set longitude = '' %}
        {% for coordinate in event.coordinate %}
        {% if coordinate.latitude != '' %}
        {% set latitude = coordinate.latitude %}
        {% set longitude = coordinate.longitude %}
        {% elseif coordinate.dbpediaLatitude != '' %}
        {% set latitude = coordinate.dbpediaLatitude %}
        {% set longitude = coordinate.dbpediaLongitude %}
        {% elseif coordinate.googleLatitude != '' %}
        {% set latitude = coordinate.googleLatitude %}
        {% set longitude = coordinate.googleLongitude %}
        {% endif %}
        {% endfor %}

        // settaggio del cookie
        Cookies.set('lat', {{ latitude }});
        Cookies.set('lng', {{ longitude }});
    </script>
{% endblock %}