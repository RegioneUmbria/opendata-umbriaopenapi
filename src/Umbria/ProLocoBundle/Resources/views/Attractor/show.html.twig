{% extends "UmbriaProLocoBundle::frontend.html.twig" %}

{% block content %}
    <div class="container">
        <div class="row">
            <div class="page-header">
                <h2>
                    {{ attractor.denominazione }}
                    <small>
                        {{ attractor.descrizioneSintetica|raw }}
                    </small>
                    <a href="{{ attractor.urlRisorsa }}" target="_blank">
                        <span class="glyphicon glyphicon-link pull-right" aria-hidden="true"></span>
                    </a>
                </h2>
            </div>
        </div>
        <div class="row">
            <div class="col-md-7">
                <h4>{{ attractor.titoloTesto }}</h4>
                <p>
                    <small>
                        {{ attractor.abstract|raw }}
                    </small>
                    <br/>
                    <br/>
                    {% for descrizione in attractor.descrizioni %}
                        {{ descrizione.titolo|raw }}
                        <br/>
                        {{ descrizione.testo|raw }}
                    {% endfor %}
                </p>
                <hr>
                {% if attractor.dbpediaAbstract != '' %}
                <h4>Informazioni DBpedia</h4>
                <p>
                    {{ attractor.dbpediaAbstract }}
                </p>
                {% endif %}
            </div>
            <div class="col-md-5">
                <div class="row">

                    <table class="table table-condensed">
                        <tbody>
                        <tr>
                            <td>
                                <small>id contenuto</small>
                            </td>
                            <td>{{ attractor.idContenuto }}</td>
                        </tr>
                        <tr>
                            <td>
                                <small>keywords</small>
                            </td>
                            <td>
                                {% if attractor.keywords != '' %}
                                    {{ attractor.keywords }}
                                {% else %}
                                    -
                                {% endif %}
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <small>coordinate</small>
                            </td>
                            <td>
                                {% for coordinate in attractor.coordinate %}
                                    {% if coordinate.latitude != '' %}
                                        <small>umbria:</small>
                                        {{ coordinate.latitude }},{{ coordinate.longitude }}
                                    {% elseif coordinate.dbpediaLatitude != '' %}
                                        <small>dbpedia:
                                        </small> {{ coordinate.dbpediaLatitude }},{{ coordinate.dbpediaLongitude }}
                                    {% elseif coordinate.googleLatitude != '' %}
                                        <small>google:
                                        </small>
                                        <a href="https://www.google.it/maps/?q=loc:{{ coordinate.googleLatitude }},{{ coordinate.googleLongitude }}"
                                           target="_blank">{{ coordinate.googleLatitude }}
                                            ,{{ coordinate.googleLongitude }}</a>
                                        <span class="glyphicon glyphicon-info-sign pull-right" data-toggle="tooltip"
                                              data-placement="top"
                                              title="Posizione calcola. Non se ne garantisce l'affidabilitÃ "></span>
                                    {% else %}
                                        -
                                    {% endif %}
                                {% endfor %}
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <small>comune</small>
                            </td>
                            <td>
                                {% if attractor.comune != '' %}
                                {{ attractor.comune }}
                                {% else %}
                                    -
                                {% endif %}
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <small>codice ISTAT</small>
                            </td>
                            <td>
                                {% if attractor.codiceIstatComune != '' %}
                                    {{ attractor.codiceIstatComune }}
                                {% else %}
                                    -
                                {% endif %}
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <small>categorie</small>
                            </td>
                            <td>
                                {% for categoria in attractor.categorie %}
                                    {% if categoria.cat is not null %}
                                        <span class="label label-default">{{ categoria.cat }}</span>
                                        <br/>
                                    {% endif %}
                                {% endfor %}
                            </td>
                        </tr>
                        </tbody>
                    </table>
                </div>
                <div class="row">
                    <table class="table table-condensed">
                        <tbody>
                        <tr>
                            <td>
                                <small>tipo</small>
                            </td>
                            <td>
                                <a href="http://linkedgeodata.org/ontology/Attraction" target="_blank">
                                    http://linkedgeodata.org/ontology/Attraction
                                </a>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <small>pagina dbpedia</small>
                            </td>
                            <td>
                                {% if attractor.dbpediaResource != '' %}
                                    <a href="{{ attractor.dbpediaResource }}" target="_blank">
                                        {{ attractor.dbpediaResource }}
                                    </a>
                                {% else %}
                                    -
                                {% endif %}
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <small>pagina wikipedia</small>
                            </td>
                            <td>
                                {% if attractor.wikipediaLink != '' %}
                                    <a href="{{ attractor.wikipediaLink }}"
                                       target="_blank">{{ attractor.wikipediaLink }}</a>
                                {% else %}
                                    -
                                {% endif %}
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <small>Localizzazione dbpedia</small>
                            </td>
                            <td>
                                {% if attractor.locatedIn != '' %}
                                    <a href="{{ attractor.locatedIn }}" target="_blank">
                                        {{ attractor.locatedIn }}
                                    </a>
                                {% else %}
                                    -
                                {% endif %}
                            </td>
                        </tr>
                        </tbody>
                    </table>
                </div>
                <div class="row">
                    <img src="{{ attractor.immagineSpallaDestra }}" height="150">
                </div>
            </div>
        </div>
        <div class="row">
            <br/>
            <ol class="breadcrumb">
                <li><a href="{{ path('attractor_index') }}">Lista Attrattori</a></li>
                <li class="active">{{ attractor.denominazione }}</li>
            </ol>
        </div>
    </div>
{% endblock %}

{% block javascripts %}
    {{ parent() }}

    <script>
        $(function () {
            $('[data-toggle="tooltip"]').tooltip()
        })

        {% set latitude = '' %}
        {% set longitude = '' %}
        {% for coordinate in attractor.coordinate %}
        {% if coordinate.latitude != '' %}
        {% set latitude = coordinate.latitude %}
        {% set longitude = coordinate.longitude %}
        {% elseif coordinate.dbpediaLatitude != '' %}
        {% set latitude = coordinate.dbpediaLatitude %}
        {% set longitude = coordinate.dbpediaLongitude %}
        {% elseif coordinate.googleLatitude != '' %}
        {% set latitude = coordinate.googleLatitude %}
        {% set longitude = coordinate.googleLongitude %}
        {% endif %}
        {% endfor %}

        // settaggio del cookie
        Cookies.set('lat', {{ latitude }});
        Cookies.set('lng', {{ longitude }});
    </script>
{% endblock %}
