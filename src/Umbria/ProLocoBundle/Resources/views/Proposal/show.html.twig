{% extends "UmbriaProLocoBundle::frontend.html.twig" %}

{% block content %}
    <div class="container">
        <div class="row">
            <div class="page-header">
                <h2>
                    {{ proposal.nomeProposta }}
                    <small>
                        {{ proposal.descrizioneSintetica|raw }}
                    </small>
                    <a href="{{ proposal.urlRisorsa }}" target="_blank">
                        <span class="glyphicon glyphicon-link pull-right" aria-hidden="true"></span>
                    </a>
                </h2>
            </div>
        </div>
        <div class="row">
            <div class="col-md-7">
                <h4>{{ proposal.titoloTesto }}</h4>
                <p>
                    <small>
                        {{ proposal.abstract|raw }}
                    </small>
                    <br/>
                    <br/>
                    {% for descrizione in proposal.descrizioni %}
                        {{ descrizione.titolo|raw }}
                        <br/>
                        {{ descrizione.testo|raw }}
                    {% endfor %}
                </p>
            </div>
            <div class="col-md-5">
                <div class="row">

                    <table class="table table-condensed">
                        <tbody>
                        <tr>
                            <td>
                                <small>id contenuto</small>
                            </td>
                            <td>{{ proposal.idContenuto }}</td>
                        </tr>
                        <tr>
                            <td>
                                <small>id risorsa</small>
                            </td>
                            <td><a href="{{ baseUrlRisorsa }}/{{ proposal.idContenuto }}">
                                    {{ baseUrlRisorsa }}/{{ proposal.idContenuto }}
                                </a>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <small>keywords</small>
                            </td>
                            <td>
                                {% if proposal.keywords != '' %}
                                    {{ proposal.keywords }}
                                {% else %}
                                    -
                                {% endif %}
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <small>coordinate</small>
                            </td>
                            <td>
                                {% for coordinate in proposal.coordinate %}
                                    {% if coordinate.latitude != '' %}
                                        <small>umbria:</small>
                                        <a href="{{ path('umbria_pro_loco_homepage') }}"
                                           onclick="setCoordCookie({{ coordinate.latitude }},{{ coordinate.longitude }})">
                                            {{ coordinate.latitude }},{{ coordinate.longitude }}
                                        </a>
                                    {% elseif coordinate.dbpediaLatitude != '' %}
                                        <small>dbpedia:
                                        </small>
                                        <a href="{{ path('umbria_pro_loco_homepage') }}"
                                           onclick="setCoordCookie({{ coordinate.dbpediaLatitude }},{{ coordinate.dbpediaLongitude }})">
                                            {{ coordinate.dbpediaLatitude }},{{ coordinate.dbpediaLongitude }}
                                        </a>
                                    {% elseif coordinate.googleLatitude != '' %}
                                        <small>google:
                                        </small>
                                        <a href="{{ path('umbria_pro_loco_homepage') }}"
                                           onclick="setCoordCookie({{ coordinate.googleLatitude }},{{ coordinate.googleLongitude }})">
                                            {{ coordinate.googleLatitude }}
                                            ,{{ coordinate.googleLongitude }}
                                        </a>
                                        <span class="glyphicon glyphicon-info-sign pull-right" data-toggle="tooltip"
                                              data-placement="top"
                                              title="Posizione calcola. Non se ne garantisce l'affidabilitÃ "></span>
                                        {% set latitude = coordinate.googleLatitude %}
                                        {% set longitude = coordinate.googleLongitude %}
                                    {% else %}
                                        -
                                    {% endif %}
                                {% endfor %}
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <small>categorie</small>
                            </td>
                            <td>
                                {% for categoria in proposal.categorie %}
                                    {% if categoria.categoriaAssociata is not null %}
                                        <span class="label label-default">{{ categoria.categoriaAssociata }}</span>
                                        <br/>
                                    {% endif %}
                                {% endfor %}
                            </td>
                        </tr>
                        </tbody>
                    </table>
                </div>
                <div class="row">
                    <table class="table table-condensed">
                        <tbody>
                        <tr>
                            <td>
                                <small>tipo</small>
                            </td>
                            <td>
                                http://dati.umbria.it/tourism/ontology/TurismoProposte
                            </td>
                        </tr>
                        </tbody>
                    </table>
                </div>
                <div class="row">
                    <img src="{{ proposal.immagineSpallaDestra }}" height="150">
                </div>
            </div>
        </div>
        <div class="row">
            <br/>
            <ol class="breadcrumb">
                <li><a href="{{ path('proposal_index') }}">Lista Proposte</a></li>
                <li class="active">{{ proposal.nomeProposta }}</li>
            </ol>
        </div>
    </div>
{% endblock %}

{% block javascripts %}
    {{ parent() }}

    <script>
        $(function () {
            $('[data-toggle="tooltip"]').tooltip()
        })

        {% set latitude = '' %}
        {% set longitude = '' %}
        {% for coordinate in proposal.coordinate %}
        {% if coordinate.latitude != '' %}
        {% set latitude = coordinate.latitude %}
        {% set longitude = coordinate.longitude %}
        {% elseif coordinate.dbpediaLatitude != '' %}
        {% set latitude = coordinate.dbpediaLatitude %}
        {% set longitude = coordinate.dbpediaLongitude %}
        {% elseif coordinate.googleLatitude != '' %}
        {% set latitude = coordinate.googleLatitude %}
        {% set longitude = coordinate.googleLongitude %}
        {% endif %}
        {% endfor %}

    </script>
{% endblock %}